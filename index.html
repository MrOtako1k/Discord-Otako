<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Family Otako | Gaming Community</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<style>
:root{
  --main:#00ffd5;
  --discord:#5865F2;
  --youtube:#ff0033;
}
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:'Cairo',sans-serif;
  min-height:100vh;
  background:radial-gradient(circle at top,#0e1433,#050812 70%);
  color:#fff;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:20px;
}
.card{
  width:100%;
  max-width:440px;
  background:linear-gradient(180deg,#0b1022,#070b18);
  border-radius:28px;
  padding:35px 25px;
  text-align:center;
  box-shadow:0 0 60px rgba(0,255,213,.15);
}
.logo{
  width:95px;height:95px;
  margin:0 auto 15px;
  border-radius:50%;
  background:linear-gradient(135deg,var(--discord),var(--main));
  display:flex;align-items:center;justify-content:center;
  font-size:48px;
}
h1{font-size:2em;font-weight:900}
.tag{opacity:.7;margin-bottom:20px}

.stats{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:12px;
  margin:20px 0;
}
.stat{
  background:rgba(255,255,255,.06);
  border-radius:16px;
  padding:12px;
}
.stat span{
  display:block;
  font-size:1.4em;
  font-weight:900;
  color:var(--main);
}

.buttons{
  display:flex;
  flex-direction:column;
  gap:14px;
}
.btn{
  padding:15px;
  border-radius:40px;
  font-size:1.05em;
  font-weight:700;
  border:none;
  cursor:pointer;
  transition:.3s;
}
.btn.discord{background:var(--discord);color:#fff}
.btn.youtube{background:var(--youtube);color:#fff}
.btn.alt{
  background:transparent;
  color:var(--main);
  border:2px solid var(--main);
}
.btn:hover{
  transform:scale(1.05);
  box-shadow:0 0 20px rgba(0,255,213,.6);
}

.footer{margin-top:20px;font-size:.75em;opacity:.6}

#toast{
  position:fixed;
  bottom:25px;
  left:50%;
  transform:translateX(-50%);
  background:#000;
  padding:12px 22px;
  border-radius:30px;
  opacity:0;
  transition:.4s;
  z-index:999;
}

/* admin */
#adminBtn{
  position:fixed;
  bottom:20px;
  right:20px;
  width:55px;height:55px;
  border-radius:50%;
  background:#000;
  color:var(--main);
  border:none;
  font-size:22px;
  cursor:pointer;
}
#adminLogin,#adminPanel{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  display:none;
  z-index:1000;
}
.adminBox{
  background:#0b1022;
  padding:25px;
  border-radius:20px;
  max-width:350px;
  margin:15% auto;
  text-align:center;
}
.adminBox input{
  width:100%;
  padding:10px;
  margin-bottom:10px;
  border-radius:10px;
  border:none;
}
</style>
</head>

<body>

<div class="card">
  <div class="logo"><i class="fab fa-discord"></i></div>
  <h1>Family Otako</h1>
  <div class="tag">Gaming â€¢ SA-MP â€¢ Discord</div>

  <div class="stats">
    <div class="stat"><span id="v">0</span>Ø²ÙŠØ§Ø±Ø§Øª</div>
    <div class="stat"><span id="c">0</span>Ù†Ù‚Ø±Ø§Øª</div>
    <div class="stat"><span id="m">â€”</span>Ø£Ø¹Ø¶Ø§Ø¡</div>
  </div>

  <div class="buttons" id="buttons">
    <a class="btn discord" id="discordLink" href="#" target="_blank"
       onclick="clicks();toast('ğŸš€ ÙØªØ­ Discord')">Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Discord</a>

    <a class="btn youtube" id="youtubeLink" href="#" target="_blank"
       onclick="clicks();toast('â–¶ï¸ ÙØªØ­ YouTube')">Ù‚Ù†Ø§Ø© YouTube</a>

    <button class="btn alt" onclick="copy()">ğŸ“‹ Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Discord</button>
  </div>

  <div class="footer">Â© Family Otako</div>
</div>

<div id="toast"></div>

<button id="adminBtn" onclick="openAdmin()">âš™ï¸</button>

<div id="adminLogin">
  <div class="adminBox">
    <h3>ğŸ” Admin Login</h3><br>
    <input id="au" placeholder="Username">
    <input id="ap" type="password" placeholder="Password">
    <button class="btn discord" onclick="login()">Login</button>
  </div>
</div>

<div id="adminPanel">
  <div class="adminBox">
    <h3>ğŸ›  Admin Panel</h3><br>
    <button class="btn alt" onclick="toggleButtons()">ğŸ‘ Ø¥Ø®ÙØ§Ø¡/Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø£Ø²Ø±Ø§Ø±</button><br><br>
    
    <input id="newDiscordLink" placeholder="Ø±Ø§Ø¨Ø· Ø¬Ø¯ÙŠØ¯ Ù„Ù€ Discord">
    <input id="newYouTubeLink" placeholder="Ø±Ø§Ø¨Ø· Ø¬Ø¯ÙŠØ¯ Ù„Ù€ YouTube">
    
    <button class="btn alt" onclick="updateLinks()">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ÙˆØ§Ø¨Ø·</button><br><br>
    <button class="btn alt" onclick="logout()">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import {
  getFirestore, doc, getDoc, setDoc,
  updateDoc, increment, onSnapshot
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBC7lJrdE_ao49Rd1O2oRP43lyD1_l5CWM",
  authDomain: "otako2k-c102d.firebaseapp.com",
  projectId: "otako2k-c102d",
  storageBucket: "otako2k-c102d.firebasestorage.app",
  messagingSenderId: "798157540144",
  appId: "1:798157540144:web:58401dada62f50766556f5"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const ref = doc(db,"site","settings");

(async()=>{
  const s=await getDoc(ref);
  if(!s.exists()){
    await setDoc(ref,{buttons:true,visits:0,clicks:0,discordLink:"https://discord.gg/zgc6Vj24",youtubeLink:"https://youtube.com/@mrotako-1k"});
  }
})();

onSnapshot(ref,(snap)=>{
  const d=snap.data();
  buttons.style.display=d.buttons?"flex":"none";
  v.textContent=d.visits;
  c.textContent=d.clicks;
  discordLink.href = d.discordLink;
  youtubeLink.href = d.youtubeLink;
});

updateDoc(ref,{visits:increment(1)});
window.clicks=()=>updateDoc(ref,{clicks:increment(1)});

window.toggleButtons=async()=>{
  const s=await getDoc(ref);
  updateDoc(ref,{buttons:!s.data().buttons});
};

window.toast=(t)=>{
  toast.innerText=t;
  toast.style.opacity=1;
  setTimeout(()=>toast.style.opacity=0,2000);
};

window.copy=()=>{
  navigator.clipboard.writeText("https://discord.gg/zgc6Vj24");
  toast("âœ… ØªÙ… Ø§Ù„Ù†Ø³Ø®");
};

fetch("https://discord.com/api/v9/invites/zgc6Vj24?with_counts=true")
.then(r=>r.json())
.then(d=>m.textContent=d.approximate_member_count)
.catch(()=>m.textContent="â€”");

const USER="admin",PASS="otako123";
window.openAdmin=()=>adminLogin.style.display="block";
window.login=()=>{
  if(au.value==USER && ap.value==PASS){
    adminLogin.style.display="none";
    adminPanel.style.display="flex";
  }
};
window.logout=()=>{
  adminPanel.style.display="none";
  adminLogin.style.display="flex";
};

window.updateLinks=async()=>{
  const newDiscord = newDiscordLink.value;
  const newYouTube = newYouTubeLink.value;
  
  if(newDiscord && newYouTube) {
    await updateDoc(ref, {
      discordLink: newDiscord,
      youtubeLink: newYouTube
    });
    toast("âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø¨Ù†Ø¬Ø§Ø­!");
  } else {
    toast("âŒ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­.");
  }
};
</script>

</body>
</html>
